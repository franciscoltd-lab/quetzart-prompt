<ion-header class="qz-header">
  <ion-toolbar class="qz-header">
    <ion-title>Registro - Artista</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">Cerrar</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="qz-bg">
    <div class="wrap">

      <!-- Perfil -->
      <div class="qz-glass block">
        <div class="block-title">Foto de perfil (opcional)</div>

        <div class="avatar-row">
          <img class="avatar" [src]="profileImagePreview || 'assets/avatar-placeholder.png'" alt="avatar" />
          <ion-button (click)="pickProfileImage()" fill="outline">Elegir foto</ion-button>
        </div>
      </div>

      <!-- Form -->
      <form [formGroup]="form" class="qz-glass block">
        <div class="block-title">Datos del artista</div>

        <ion-item class="item" lines="none">
          <ion-input label="Nombre completo" labelPlacement="stacked" formControlName="fullName"></ion-input>
        </ion-item>
        <div class="err" *ngIf="f.fullName.touched && f.fullName.invalid">Nombre requerido.</div>

        <ion-item class="item" lines="none">
          <ion-input label="Corriente artística" labelPlacement="stacked" formControlName="artisticStyle"></ion-input>
        </ion-item>
        <div class="err" *ngIf="f.artisticStyle.touched && f.artisticStyle.invalid">Campo requerido.</div>

        <ion-item class="item" lines="none">
          <ion-input label="Email" labelPlacement="stacked" type="email" formControlName="email"></ion-input>
        </ion-item>
        <div class="err" *ngIf="f.email.touched && f.email.invalid">Email inválido.</div>

        <ion-item class="item" lines="none">
          <ion-input label="Edad" labelPlacement="stacked" type="number" formControlName="age"></ion-input>
        </ion-item>
        <div class="err" *ngIf="f.age.touched && f.age.invalid">Edad inválida.</div>

        <ion-item class="item" lines="none">
          <ion-input label="CURP" labelPlacement="stacked" formControlName="curp" autocapitalize="characters"></ion-input>
        </ion-item>
        <div class="err" *ngIf="f.curp.touched && f.curp.invalid">
          CURP inválida (formato).
        </div>

        <ion-item class="item" lines="none">
          <ion-input label="Contraseña" labelPlacement="stacked" type="password" formControlName="password"></ion-input>
        </ion-item>
        <div class="hint">Mín. 8 caracteres, 1 mayúscula, 1 número y 1 caracter especial.</div>
        <div class="err" *ngIf="f.password.touched && f.password.invalid">Contraseña no cumple.</div>

        <ion-item class="item" lines="none">
          <ion-textarea label="Resumen" labelPlacement="stacked" formControlName="bio" autoGrow="true"></ion-textarea>
        </ion-item>
        <div class="err" *ngIf="f.bio.touched && f.bio.invalid">
          Escribe mínimo 20 caracteres.
        </div>
      </form>

      <!-- Portafolio (opcional) -->
      <div class="qz-glass block">
        <div class="row">
          <div class="block-title">Portafolio (opcional)</div>
          <ion-button size="small" (click)="addPortfolioImages()">Añadir</ion-button>
        </div>

        <ion-grid *ngIf="portfolio.length">
          <ion-row>
            <ion-col size="4" *ngFor="let img of portfolio; let i = index">
              <div class="thumb">
                <img [src]="img" alt="p" />
                <ion-button class="del" size="small" fill="clear" (click)="removePortfolio(i)">
                  <ion-icon name="close-circle"></ion-icon>
                </ion-button>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>

        <div class="hint" *ngIf="!portfolio.length">Puedes subir varias imágenes de tus obras.</div>
      </div>

      <ion-button expand="block" class="cta" [disabled]="form.invalid" (click)="submit()">
        Registrar
      </ion-button>

      <div style="height: 30px;"></div>
    </div>
  </div>
</ion-content>
